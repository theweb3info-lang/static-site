# EnWrite — 渐进提示式英语写作练习 App

## 一句话定义
看中文写英文，写不出来？图片提示 → 首词提示 → 首字母 → 逐字母揭示，层层递进直到你写出来。

## 核心机制：5级提示阶梯

```
Level 0: 显示中文句子 → 用户尝试写英文
         ↓ 写不出 / 点击"提示"
Level 1: 展示相关图片辅助理解场景
         ↓ 还不行
Level 2: 揭示第一个单词
         ↓ 还不行
Level 3: 隐藏回去，只给每个单词的首字母
         ↓ 还不行
Level 4: 逐词揭示，每点一次多露一个词
         直到完整写出
```

- 提示级别越低 → 得分越高（满分5星，每用一级提示扣1星）
- 最终必须**完整输入正确英文**才算过关（允许小写/标点宽松匹配）

---

## 目标用户 & 分级体系

| 级别 | 对应 | 词汇量 | 句子特征 |
|------|------|--------|----------|
| 🌱 Starter | 幼儿园 | 100-300 | 单词/短语为主，3-5词 |
| 🌿 Elementary | 小学 | 300-1000 | 简单句，5-8词 |
| 🌳 Junior | 初中 | 1000-2500 | 复合句，8-15词 |
| 🎓 Senior | 高中/四级 | 2500-5000 | 从句、时态变化 |
| 🏆 Advanced | 六级/日常口语 | 5000+ | 地道表达、习语、长句 |

用户首次进入选级别，可随时调整。每级内部按主题分单元。

## 句子来源（不侵权方案）

1. **AI 生成** — 用 GPT/Claude API 按级别+主题批量生成句对，存为本地题库 JSON
   - 预生成，不实时调用（省钱+离线可用）
   - 每级 500-1000 句起步
2. **公开语料改编** — Tatoeba（CC 协议，180万+句对）、OpenSubtitles
3. **经典句型模板** — 语法点驱动，自己造句，无版权问题
4. **用户贡献** — V2.0 开放 UGC 投稿

**绝对不用**：教材原文、考试真题原文、版权绘本内容

## 图片来源（不侵权方案）

- **AI 生成** — DALL-E / Stable Diffusion 按句子场景生成配图
- **Unsplash API** — 免费商用，按关键词匹配
- 预生成打包进 App，不实时请求

---

## 页面结构

### 1. 首页（HomeScreen）
- 当前级别 + 今日进度（已练/目标）
- 连续天数 streak
- 主题单元网格（食物、动物、学校、旅行、科技…）
- 每日推荐 / 随机练习入口

### 2. 练习页（PracticeScreen）⭐ 核心页面
```
┌─────────────────────────┐
│  🇨🇳 我每天早上跑步三十分钟   │  ← 中文题目
│                         │
│  [          图片区          ]  ← Level 1 才显示
│                         │
│  💡 I ___ ___ ___ ___   │  ← 提示区（渐进揭示）
│                         │
│  ┌─────────────────────┐│
│  │ 用户输入区            ││  ← 英文输入框
│  └─────────────────────┘│
│                         │
│  [提示 💡]    [提交 ✅]   │
│                         │
│  ⭐⭐⭐⭐☆  已用1次提示   │  ← 实时星级
└─────────────────────────┘
```

### 3. 结果页（ResultScreen）
- ✅ 正确：显示星级 + 标准答案对比 + 替代表达
- ❌ 错误：高亮差异，可重试或看解析
- 语法/词汇知识点小卡片

### 4. 统计页（StatsScreen）
- 每日/周/月练习量折线图
- 各级别完成进度
- 薄弱点分析（常错的语法点/词汇）
- streak 日历热力图

### 5. 设置页（SettingsScreen）
- 级别切换
- 每日目标句数（默认10句）
- 提醒时间
- 匹配严格度（严格/宽松）

---

## 答案匹配规则

```
严格模式：大小写+标点+拼写完全一致
宽松模式（默认）：
  - 忽略首字母大小写
  - 忽略句末标点
  - 允许缩写互换（I'm = I am）
  - 多个正确答案（同义表达）
```

## 数据模型

```dart
class Sentence {
  String id;
  String chinese;          // 中文原文
  List<String> answers;    // 可接受的英文答案（多个）
  String? imageUrl;        // 配图路径
  String level;            // starter/elementary/junior/senior/advanced
  String topic;            // 主题标签
  List<String> grammarTags; // 语法点标签
}

class PracticeRecord {
  String sentenceId;
  int hintsUsed;           // 0-4
  int stars;               // 1-5
  String userAnswer;
  DateTime timestamp;
  int attemptCount;
}

class UserProfile {
  String level;
  int dailyGoal;
  int currentStreak;
  Map<String, int> topicProgress; // topic → completed count
}
```

## 技术栈

| 层 | 选型 |
|----|------|
| 框架 | Flutter (Dart) |
| 状态管理 | Provider / Riverpod |
| 本地存储 | sqflite（练习记录）+ JSON assets（题库） |
| 图表 | fl_chart |
| 图片 | 本地 assets（预生成） |
| 文本匹配 | 自写 fuzzy matcher（编辑距离 + 规则） |

## 平台
iOS + Android（Flutter 跨平台）

---

## MVP 范围

### Phase 1（2周）
- [ ] 练习页核心交互（5级提示）
- [ ] 1个级别题库（Elementary，200句）
- [ ] 宽松匹配引擎
- [ ] 本地记录存储
- [ ] 基础首页 + 统计

### Phase 2（2周）
- [ ] 全5个级别题库
- [ ] AI 生成配图（批量预生成）
- [ ] streak + 每日提醒
- [ ] 主题单元系统

### Phase 3（V1.1）
- [ ] 错题本 + 薄弱点分析
- [ ] 语法知识点卡片
- [ ] 排行榜 / 分享
- [ ] Widget 桌面小组件

---

## 竞品差异

| 对比 | EnWrite | 多邻国 | 百词斩 | 扇贝 |
|------|---------|--------|--------|------|
| 核心 | 写完整句 | 选择题为主 | 单词为主 | 阅读为主 |
| 提示机制 | 5级渐进 | 直接给答案 | N/A | N/A |
| 输出训练 | ✅ 必须打字 | 少量 | ❌ | 少量 |
| 隐私 | 全本地 | 云端 | 云端 | 云端 |
| 免费 | ✅ | 部分 | 部分 | 部分 |

**核心卖点：** 市面上几乎没有 App 专注"看中文写英文完整句子"这个场景。多邻国偏选择题，百词斩偏单词，EnWrite 填补了**主动输出训练**的空白。

## 商业模式
- **免费版**：每日 10 句 + 2 个级别
- **Pro**：无限练习 + 全级别 + 错题分析 + 无广告
- 定价：$2.99/月 或 $19.99/年

## App 名称候选
- **EnWrite** — 简洁直接
- **WriteOut** — 强调输出
- **SentencePilot** — 跟 GoalPilot 系列
- **翻译达人** — 中文名

---

## 成功指标
- D7 留存 ≥ 35%（练习类 App 天然高频）
- 日均练习 ≥ 8 句/活跃用户
- App Store 评分 ≥ 4.6
