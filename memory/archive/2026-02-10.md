# 2026-02-10 - Meiji Restoration Project: TTS Pipeline Fixes & Image Generation

## Critical TTS Bug Discovery
- **MAJOR ISSUE**: Japanese name protection markers (、name、) being read aloud by Edge TTS
  - Affects all 11 existing articles (~30+ occurrences per article)
  - Most severe TTS quality issue discovered
  - protect-names.py step in preprocess-tts.sh is **harmful** - needs removal

## TTS Quality Tool Evaluation
Tested 5 tools for TTS issue detection:
- **Copilot CLI**: ⭐⭐⭐⭐⭐ (best - 10s, free, 100% accurate)
- **Codex CLI**: ⭐⭐⭐⭐⭐ (thorough - 30s, $0.03-0.05, 100% accurate)
- **Manual review**: ⭐⭐⭐⭐ (10-15min, free, 100% accurate)
- **Qwen CLI**: ⭐⭐ (too brief unless heavily prompted)
- **Claude CLI**: ⭐ (too slow, 45s+ timeout)

**Decision**: Use Copilot CLI as primary tool for TTS quality checks

## New Scripts Created
- `fix-tts-pauses.sh`: 7-step comprehensive TTS pause/punctuation fix
  - Removes 、name、 markers
  - Fixes (hang2) pronunciation notes
  - Handles year format confusion
  - Adds 顿号 for number+quantifier
  - Splits ultra-long sentences
- Successfully tested on 11-胜海舟-tts.txt

## Person List Expansion
- Added **阿部正弘** at position #40 (幕府老中首座, Black Ships crisis handler)
- Total: 77 people, ~71 articles planned

## Image Generation Started
- Located Jimeng AI skill at `/Users/andy_crab/.openclaw/workspace/skills/jimeng-image/`
- Created 3 Chinese prompts for 01-坂本龙马:
  1. Young swordsman scene
  2. Negotiation scene
  3. Ship scene
- Started generating first batch (in progress)

## Documentation Created
- `TTS-PIPELINE-FIX.md`: Root cause analysis and long-term solution
- `TTS-DETECTION-TOOLS.md`: Comprehensive tool evaluation

## Next Actions Queued
1. Complete image generation for 01-坂本龙马 (3 images)
2. Update preprocess-tts.sh to remove harmful name protection step
3. Batch apply fix-tts-pauses.sh to articles 01-10
4. Regenerate all audio files (01-11) with corrected TTS text
5. Continue Tier 2 article generation OR proceed with image generation for remaining articles

## Git Commits
- 593f7c1: Add 27 common polyphone corrections
- cf90002: Add 阿部正弘 to person list (#40)
- 63ef0ef: Comprehensive TTS pause and punctuation corrections
- 77af043: Add TTS pipeline fix documentation
- 77fb820: Add TTS detection tools evaluation
